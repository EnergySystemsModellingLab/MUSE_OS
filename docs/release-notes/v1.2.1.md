_The following guide should be read by all users upgrading from v1.2.0. Please read through carefully, as some of the changes may require you to modify your model input files or downstream analysis scripts._

## Installation

If you have previously installed MUSE within a virtual environment, you can update MUSE by activating your virtual environment and running `pip install --upgrade muse-os`

If you installed MUSE using a different method, please consult the documentation.

## Changes

### Carbon budget module

- The bisection method has been fixed, as this was not working as expected before (#483, #484). Additionally, a number of default settings have been changed, and parameters renamed. Users must carefully check which parameters are specified in their settings files, as any unspecified parameters will revert to the new defaults. The main changes are as follows:
  - `control_undershoot` / `control_overshoot`: The default has been changed from True to False
  - `method`: The default has changed from `fitting` to `bisection`
  - `method_options.refine_price`: The default has changed from True to False
  - `method_options.resolution`: New parameter
  - `method_options.sample_size`: This parameter no longer applies to the bisection algorithm, and won't be permitted when using that method. Please use `method_options.max_iterations` instead
  - `method_options.tolerance` and `method_options.early_termination_count`: New parameters for the bisection method

__Please read the [new documentation page](https://muse-os.readthedocs.io/en/documentation/inputs/toml.html#carbon-market) in full before using a carbon budget__

__Edit 20/10/24:__ _MUSE will throw an error if no `method_options` are specified in the toml file (i.e. if you want to use the default option for all parameters). This is a known bug which will be fixed in v1.2.3, but for now please make that at least one `method_option` parameter is specified in the toml file (e.g. `method_options.max_iterations = 5`), or explicitly build an empty dictionary by including the following line: `[carbon_budget_control.method_options]`_

### Default model

- A number of changes have been made to the default model that is generated with `muse --model default --copy PATH`. This is mostly to simplify the outputs (#461)

### Tutorials

- The tutorials have been simplified and re-ordered (#470)
- A tutorial has been added explaining the use of a carbon budget (#486)
